<div class="container mt-5">
  <h2>Modifica Prodotti</h2>
  <div class="input-group mb-3">
    <input type="text" class="form-control" placeholder="Cerca prodotto..." [(ngModel)]="searchQuery" (input)="searchProdotti()">
  </div>

  <div class="row">
    <div *ngFor="let prodotto of prodotti" class="col-md-4 mb-3">
      <div class="card">
        <img [src]="prodotto.imageUrl" class="card-img-top" alt="{{ prodotto.nomeProdotto }}">
        <div class="card-body">
          <h5 class="card-title">{{ prodotto.nomeProdotto }}</h5>
          <p class="card-text">{{ prodotto.descrizione }}</p>
          <p class="card-text"><strong>Prezzo:</strong> {{ prodotto.prezzo | currency }}</p>
          <p class="card-text"><strong>Disponibile:</strong> {{ prodotto.isDisponibile ? 'SÃ¬' : 'No' }}</p>
          <button class="btn btn-danger me-2" (click)="deleteProdotto(prodotto)">Elimina</button>
          <button class="btn btn-primary" (click)="selectProdotto(prodotto)">Modifica</button>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="selectedProdotto" class="mt-5">
    <h3>Modifica Prodotto</h3>
    <form [formGroup]="prodottoForm" (ngSubmit)="onSubmit()">
      <input type="hidden" formControlName="id">
      <div class="form-group">
        <label for="nomeProdotto">Nome Prodotto</label>
        <input id="nomeProdotto" class="form-control" formControlName="nomeProdotto">
      </div>
      <div class="form-group">
        <label for="descrizione">Descrizione</label>
        <textarea id="descrizione" class="form-control" formControlName="descrizione"></textarea>
      </div>
      <div class="form-group">
        <label for="prezzo">Prezzo</label>
        <input id="prezzo" type="number" class="form-control" formControlName="prezzo">
      </div>
      <div class="form-group">
        <label for="imageUrl">URL Immagine</label>
        <input id="imageUrl" class="form-control" formControlName="imageUrl">
      </div>
      <div class="form-group">
        <label for="categoriaId">Categoria</label>
        <select id="categoriaId" class="form-control" formControlName="categoriaId">
          <option *ngFor="let categoria of categorie" [value]="categoria.id">{{ categoria.descrizione }}</option>
        </select>
      </div>
      <div class="form-check">
        <input id="isDisponibile" type="checkbox" class="form-check-input" formControlName="isDisponibile">
        <label for="isDisponibile" class="form-check-label">Disponibile</label>
      </div>
      <button type="submit" class="btn btn-primary mt-3">Salva Modifiche</button>
    </form>
  </div>
</div>
